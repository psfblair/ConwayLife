(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;$.Define($$,{LifeHtml:{Canvas:{GameEvents:$.Field(function(){return c.New();}),adjustInitArrayAndRedraw:function(s,t,u,v,w,x,y){var z,A;z=(y.clientX/v>>0)-w;A=(y.clientY/v>>0)-x;return e.toggleCellAndRedraw(z,A,function(B){return g.drawLife(s,t,u,v,B);});},canvas:$.Field(function(){var C;C=g.element();return C.Body;}),context:$.Field(function(){return g.canvas().getContext("2d");}),drawLife:function(D,E,F,G,H){var I;D.save();D.clearRect(0,0,h(E),h(F));D.fillStyle="#8EE5EE";D.fillRect(0,0,h(E),h(F));D.save();D.strokeStyle="black";D.fillStyle="black";D.lineWidth=1;I=$.Tupled(function(J){var K,L;K=J[0];L=J[1];return g.drawSmallCircleAtPoint(D,G,K,L);});i.iter(I,H);return D.save();},drawSmallCircleAtPoint:function(M,N,O,P){var Q,R,S,T;Q=(h(N)-2)/2;R=3.14159265358979*2;S=h(O*N+(N/2>>0));T=h(P*N+(N/2>>0));M.beginPath();M.arc(S,T,Q,0,R,true);M.closePath();return M.stroke();},element:$.Field(function(){var U,V;U=l.Tags();V=$.New(n,{$:0});return U.NewTag("canvas",V);}),initialize:function(W,X,Y,Z,_0){var _1,_3;if(o.Equals((_1=g.canvas(),_1.getContext),undefined)){p.initElement(g.canvas());}g.canvas().width=W;g.canvas().height=X;g.context().canvas.addEventListener("click",function(_2){return g.adjustInitArrayAndRedraw(g.context(),W,X,Y,Z,_0,_2);},false);g.drawLife(g.context(),W,X,Y,e.currentState().contents);return q.addListener((_3=g.GameEvents(),_3.event),function(_4){if(_4.$==1){return e.stopDrawing();}else{if(_4.$==2){return e.stopDrawingAndReset(function(_5){return g.drawLife(g.context(),W,X,Y,_5);});}else{return e.startDrawing(function(_6){return g.drawLife(g.context(),W,X,Y,_6);});}}});},nodes:function(){var _7,_8;return r.add(k.Div(m.ofArray([k.Width($$.String(g.canvas().width)),(_7=k.Attr(),_7.NewAttr("style","float:left; clear:both"))])),m.ofArray([r.add(k.Div(m.ofArray([(_8=k.Attr(),_8.NewAttr("style","float:center"))])),m.ofArray([g.element()]))]));}}}});$.OnInit(function(){a=$.Safe($$.IntelliFactory.WebSharper);b=$.Safe(a.Control);c=$.Safe(b["FSharpEvent`1"]);d=$.Safe($$.Life);e=$.Safe(d.Game);f=$.Safe($$.LifeHtml);g=$.Safe(f.Canvas);h=$.Safe($$.Number);i=$.Safe(a.Seq);j=$.Safe(a.Html);k=$.Safe(j.Default);l=$.Safe(k.HTML5);m=$.Safe(a.List);n=$.Safe(m.T);o=$.Safe(a.Unchecked);p=$.Safe($$.G_vmlCanvasManager);q=$.Safe(a.Util);return r=$.Safe(j.Operators);});$.OnLoad(function(){g.element();g.context();g.canvas();g.GameEvents();});}());
